FOLDERS
000-pics:
This folder is a place where I can store any figures generated by notebooks. Subfolders
of this folder are to be numbered according to the notebook that generated the figure,
although subfolders thereof may be named more descriptively (although I think it will keep
me sane to number these as well, that way I can recover my train of thought based on the
numbering).

00-rpeaks:
This folder contains R peaks that were detected in signals cleaned as per notebook
11-3/20

01-unfiltered-rr-intervals:
This folder contains the RR intervals calculated from the contents of 00-rpeaks, i.e., the
output of notebook 11-26/01 (abbreviated to notebook 01 since this README is in directory
11-26). These intervals
	* Contain intervals < 0.25 seconds
	* Contain intervals due to missing data and extrema
	* Contain intervals due to missed beats, i.e., multiple intervals

04-imputed-rr-intervals:
Contains the output of notebook 04

07-pipeline-outputs:
Contains the outputs of notebook 07

NOTEBOOKS
01:
This notebook calculates unfiltered rr intervals from the contents of folder 00. Note that 
this fixes an oversight from a similar notebook in folder 11-3, where I calculated intervals
*before* concatenating. This introduces 4 unnecessary NA values. In principle, you want to
minimize data loss, but given how rough the filtering process is going to be in the coming 
notebooks, it just makes me feel a little better to exhibit *some* scruple w.r.t. data loss.

02:
This notebook gives a little overview of:
	* How many intervals of < 0.25 seconds there are
	* How many intervals of > 10 seconds ther are
	* A couple histograms of the RR intervals, mainly to compare to the analogous figures
	  in the last notebook.

03: 
This notebook was two attempts at filtering the intervals so that 
	* Intervals less than 0.25 seconds would be reincorporated into the next interval
	* Intervals over 5 seconds would be dropped (was originally 10 seconds)
	* Intervals would be classified as single, double, triple, etc. and then broken up
	  accordingly.

The two approaches tried in this notebook---multiples of median and Gaussian mixture 
model---did not succeed. Joshua suggested another approach: to break the interval based on
the length of the previous interval. I think this is much simpler, so I'm going to do this
in the next notebook.

04:
This notebook uses a simple approach to detect and break up multiple intervals. We iterate
over the rows of the dataframe, and if we find two intervals a and b such that
	round(a/b) >= 2;
that is, the next interval is approximately at least two times the length of the previous
interval, then we break the interval into an appropriate number of pieces and place them
into the rr intervals. 

This approach is quite slow (one hour for infant 1's rr intervals), but it does work, and
plots show that this eliminates huge spikes in the data (although smaller discontinuities
are still present, which means that a further refinement of the R peak detection may be
necessary).

05: 
This is an exploratory notebook for calculating HRV statistics. Currently (12/3/22), it 
calculates mean RR, sdRR, rmssd, and pNNk. In the future, I may also implement frequency
domain statistics, and this is the notebook to do it.

I was originally facing unacceptably slow performance with lines of the form

	df["interval"].rolling().apply(my_hrv_statistic)

but I cheesed a workaround that works just fine so far. When the time comes for frequency
domain statistics, I might need to contend with numba or some other optimizer.

06:
This notebook fixes the gap in the time index between files b and c for infants 2 and 3. 
Against the conventions of this notebook, the files will be stored in directory
Deidentified-Raw-Waveforms/06-shifted-2-and-3

07:
This notebook carries out the RR interval calculation on all of the other infants.

It works, but it's painfully slow. I realized only part way through that there's likely a
way to do this using filters that's much faster, but these are the results I have for now.

08:
This notebook is a cleaner version of notebook 05 that contains code for the HRV stats and 
a section for making plots.


























~place holder~